var app=angular.module("foodApp",["ui.router"]);app.controller("appController",["$scope","$state",function(o,e){function t(o,e){var t=new google.maps.LatLng(o,e);image="http://www.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png",mapOptions={center:new google.maps.LatLng(o,e),zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!0,panControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.TOP_left}},map=new google.maps.Map(document.getElementById("map_canvas"),mapOptions),marker=new google.maps.Marker({position:t,map:map,icon:image});var a=document.getElementById("searchTextField"),i=new google.maps.places.Autocomplete(a,{types:["geocode"]});n(t),i.bindTo("bounds",map),infowindow=new google.maps.InfoWindow,google.maps.event.addListener(i,"place_changed",function(o){infowindow.close();var e=i.getPlace();e.geometry.viewport?map.fitBounds(e.geometry.viewport):(map.setCenter(e.geometry.location),map.setZoom(17)),c(e.name,e.geometry.location),$(".MapLat").val(e.geometry.location.lat()),$(".MapLon").val(e.geometry.location.lng()),s(e.geometry.location.lat(),e.geometry.location.lng())}),google.maps.event.addListener(map,"click",function(o){$(".MapLat").val(o.latLng.lat()),$(".MapLon").val(o.latLng.lng()),infowindow.close(),(new google.maps.Geocoder).geocode({latLng:o.latLng},function(o,e){if(e==google.maps.GeocoderStatus.OK){var t=o[0].geometry.location.lat(),n=o[0].geometry.location.lng();c(o[0].address_components[0].long_name,new google.maps.LatLng(t,n)),s(t,n),$("#searchTextField").val(o[0].formatted_address)}})})}function n(o){(new google.maps.Geocoder).geocode({latLng:o},function(o,e){if(e==google.maps.GeocoderStatus.OK){var t=o[0].geometry.location.lat(),n=o[0].geometry.location.lng();c(o[0].address_components[0].long_name,new google.maps.LatLng(t,n)),$("#searchTextField").val(o[0].formatted_address)}})}var a,i;function l(){console.log("Error location")}function c(o,e){marker.setIcon(image),marker.setPosition(e),infowindow.setContent(o)}function s(e,t){o.showSpin=!0,Zomato.init({key:"48cb1d3a7d46ed2913fa7a1e8ca8575a"}),Zomato.geocode({latitude:e,longitude:t},function(e){o.$apply(function(){e?(o.allRestaurants=e,o.showSpin=!1):o.allRestaurants=[]})})}s(12.972442,77.580643),t(12.972442,77.580643),a=12.9766,i=77.5993,Zomato.init({key:"48cb1d3a7d46ed2913fa7a1e8ca8575a"}),Zomato.geocode({latitude:a,longitude:i},function(e){o.$apply(function(){o.fullR=e||[]})}),o.findMe=function(){if(navigator.geolocation){var e=setTimeout("geolocFail()",1e4);o.showSpin=!0,navigator.geolocation.getCurrentPosition(function(o){clearTimeout(e);var a=o.coords.latitude,i=o.coords.longitude;n(new google.maps.LatLng(a,i)),t(a,i),s(a,i)},function(o){clearTimeout(e),l()})}else l()},o.$on("viewPressed",function(t,n){viewOne=n.viewOne,o.resId=n.resId,1==viewOne&&(o.callRest(o.resId),e.go("specific"))}),o.tileSelected=function(t){Zomato.init({key:"48cb1d3a7d46ed2913fa7a1e8ca8575a"}),Zomato.restaurant(t,function(e){o.$apply(function(){o.oneSelected=e||[]})}),e.go("menu")},o.goBac=function(){e.go("basic")},o.hideMap=function(){o.hideCanvas=!o.hideCanvas},o.callRest=function(e){Zomato.init({key:"48cb1d3a7d46ed2913fa7a1e8ca8575a"}),Zomato.restaurant(e,function(e){o.$apply(function(){o.oneRest=e||[]})})},o.type="basic"}]).directive("hotelDetails",["$rootScope",function(o){return{restrict:"E",templateUrl:"src/oneRestDetail.html",scope:{restaurant:"="},link:function(o,e){o.on=function(){o.overlay=!0},o.off=function(){o.overlay=!1};var t=0;o.viewOne=function(e){t+=1,o.$emit("viewPressed",{viewOne:t,resId:e})}}}}]).config(function(o,e){e.otherwise("/basic"),o.state("basic",{url:"/basic",templateUrl:"src/basic.html",controller:""}).state("specific",{url:"/specific",templateUrl:"src/specific.html",controller:""}).state("menu",{url:"/menu",templateUrl:"src/smallTiles.html",controller:""})});